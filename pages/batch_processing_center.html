<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Batch Processing Center - ImageToolkit Pro</title>
    <meta name="description" content="Batch process files at scale right in your browser — private, fast, and server-free." />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="icon" type="image/svg+xml" href="../public/favicon.svg" />
    <link rel="icon" type="image/x-icon" href="../public/favicon.ico" />
    <link rel="apple-touch-icon" href="../public/apple-touch-icon-180.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fimagetoolk2871back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
    <link rel="canonical" href="https://imagetoolkit.tech/pages/batch_processing_center.html" />
    <meta name="robots" content="index,follow" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="ImageToolkit Pro" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Batch Processing Center - ImageToolkit Pro" />
    <meta property="og:description" content="Batch process files at scale right in your browser — private, fast, and server-free." />
    <meta property="og:url" content="https://imagetoolkit.tech/pages/batch_processing_center.html" />
    <meta property="og:image" content="https://imagetoolkit.tech/public/og/og-default.svg" />
    <meta property=\"og:image:width\" content=\"1200\" />
    <meta property=\"og:image:height\" content=\"630\" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Batch Processing Center - ImageToolkit Pro" />
    <meta name="twitter:description" content="Batch process files at scale right in your browser — private, fast, and server-free." />
    <meta name=\"twitter:image\" content=\"https://imagetoolkit.tech/public/og/og-default.svg\" />
        <meta name="theme-color" content="#0ea5e9" />

        <!-- SEO: Structured Data -->
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebApplication",
            "name": "ImageToolkit Pro - Batch Processing Center",
            "url": "https://imagetoolkit.tech/pages/batch_processing_center.html",
            "applicationCategory": "MultimediaApplication",
            "operatingSystem": "Web",
            "description": "Batch process images and PDFs locally in your browser with privacy-first queue management.",
            "browserRequirements": "Requires a modern browser with Canvas and WebAssembly support",
            "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
            "publisher": {"@type": "Organization", "name": "ImageToolkit Pro"}
        }
        </script>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://imagetoolkit.tech/index.html"},
                {"@type": "ListItem", "position": 2, "name": "Batch Processing Center", "item": "https://imagetoolkit.tech/pages/batch_processing_center.html"}
            ]
        }
        </script>
</head>
<body class="bg-background text-text-primary font-inter antialiased">
    <!-- Navigation Header -->
    <header class="sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gradient">ImageToolkit Pro</h1>
                        <p class="text-xs text-text-secondary">Professional Processing</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="../index.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Home</a>
                    <a href="image_processing_hub.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Image Tools</a>
                    <a href="pdf_merge.html" class="text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a>
                    <a href="qr_code_studio.html" class="text-text-secondary hover:text-primary transition-colors duration-300">QR Studio</a>
                    <a href="batch_processing_center.html" class="text-primary font-medium">Batch Process</a>
                    <a href="privacy-policy.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Privacy</a>
                </div>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg hover:bg-surface transition-colors duration-300" id="mobile-menu-btn">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Navigation -->
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 bg-surface rounded-lg mt-2">
                    <a href="../index.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Home</a>
                    <a href="image_processing_hub.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Image Tools</a>
                    <a href="pdf_merge.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a>
                    <a href="qr_code_studio.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">QR Studio</a>
                    <a href="batch_processing_center.html" class="block px-3 py-2 text-primary font-medium">Batch Process</a>
                    <a href="privacy-policy.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Privacy</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Header -->
    <section class="py-12 bg-background-light border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-3 mb-4">
                    <div class="w-12 h-12 bg-warning/20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                    </div>
                    <h1 class="text-3xl md:text-4xl font-bold">Batch Processing Center</h1>
                </div>
                <p class="text-xl text-text-secondary max-w-3xl mx-auto mb-8">
                    Handle multiple files simultaneously with advanced queue management and custom workflow creation. Process up to 100 files with enterprise-level efficiency.
                </p>
                
                <!-- Processing Statistics -->
            <div class="flex flex-wrap justify-center gap-6 text-sm">
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-accent rounded-full animate-pulse"></div>
                        <span class="text-text-secondary">Active Jobs:</span>
                <span class="text-accent font-bold" id="active-jobs-count">0</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-primary rounded-full"></div>
                        <span class="text-text-secondary">Files in Queue:</span>
                <span class="text-primary font-bold" id="files-in-queue-count">0</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-warning rounded-full"></div>
                        <span class="text-text-secondary">Completed Today:</span>
                <span class="text-warning font-bold" id="completed-today-count">0</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Processing Interface -->
    <section class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Desktop Three-Panel Layout -->
            <div class="hidden lg:grid lg:grid-cols-12 gap-6 h-screen max-h-[800px]">
                <!-- Left Panel - File Upload & Organization -->
                <div class="col-span-4 bg-surface rounded-xl border border-border overflow-hidden">
                    <div class="p-6 border-b border-border">
                        <h2 class="text-lg font-semibold mb-2">File Organization</h2>
                        <p class="text-text-secondary text-sm">Drag files here or browse to upload</p>
                    </div>
                    
                    <!-- Upload Zone -->
                    <div class="p-6">
                        <div class="drop-zone mb-6" id="batch-drop-zone">
                            <div class="flex flex-col items-center space-y-4">
                                <div class="w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                    </svg>
                                </div>
                                <div class="text-center">
                                    <h3 class="font-medium mb-1">Drop files here</h3>
                                    <p class="text-text-secondary text-sm">Up to 100 files, 10MB each</p>
                                </div>
                                <button class="btn-primary text-sm py-2 px-4">
                                    Browse Files
                                </button>
                            </div>
                            <input type="file" class="hidden" id="batch-file-input" multiple accept="image/*,.pdf,.doc,.docx" />
                        </div>

                        <!-- File List -->
                        <div class="space-y-2 max-h-96 overflow-y-auto" id="file-list">
                            <!-- Sample Files -->
                            <div class="flex items-center space-x-3 p-3 bg-background rounded-lg border border-border">
                                <div class="w-8 h-8 bg-primary/20 rounded flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium truncate">product_image_01.jpg</p>
                                    <p class="text-xs text-text-secondary">2.4 MB • Ready</p>
                                </div>
                                <button class="text-text-secondary hover:text-error transition-colors duration-300">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                    </svg>
                                </button>
                            </div>

                            <div class="flex items-center space-x-3 p-3 bg-background rounded-lg border border-border">
                                <div class="w-8 h-8 bg-accent/20 rounded flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium truncate">annual_report.pdf</p>
                                    <p class="text-xs text-text-secondary">8.7 MB • Ready</p>
                                </div>
                                <button class="text-text-secondary hover:text-error transition-colors duration-300">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                    </svg>
                                </button>
                            </div>

                            <div class="flex items-center space-x-3 p-3 bg-background rounded-lg border border-border">
                                <div class="w-8 h-8 bg-primary/20 rounded flex items-center justify-center flex-shrink-0">
                                    <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium truncate">banner_design.png</p>
                                    <p class="text-xs text-text-secondary">5.2 MB • Ready</p>
                                </div>
                                <button class="text-text-secondary hover:text-error transition-colors duration-300">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Batch Actions -->
            <div class="mt-6 pt-4 border-t border-border">
                            <div class="flex space-x-2">
                <button class="btn-secondary text-sm py-2 px-3 flex-1" id="clear-all-btn">
                                    Clear All
                                </button>
                <button class="btn-primary text-sm py-2 px-3 flex-1" id="add-to-queue-btn">
                                    Add to Queue
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Center Panel - Processing Configuration -->
                <div class="col-span-4 bg-surface rounded-xl border border-border overflow-hidden">
                    <div class="p-6 border-b border-border">
                        <h2 class="text-lg font-semibold mb-2">Workflow Configuration</h2>
                        <p class="text-text-secondary text-sm">Create custom processing chains</p>
                    </div>
                    
                    <div class="p-6 overflow-y-auto max-h-full">
                        <!-- Workflow Builder -->
                        <div class="space-y-6">
                            <!-- Operation 1 -->
                            <div class="bg-background rounded-lg p-4 border border-border">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs font-bold">1</div>
                                        <h3 class="font-medium">Image Compression</h3>
                                    </div>
                                    <button class="text-text-secondary hover:text-error transition-colors duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Quality Level</label>
                                        <select class="input-field w-full text-sm">
                                            <option>High Quality (80%)</option>
                                            <option>Medium Quality (60%)</option>
                                            <option>Low Quality (40%)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Target Size</label>
                                        <select class="input-field w-full text-sm">
                                            <option>Auto Optimize</option>
                                            <option>Under 1MB</option>
                                            <option>Under 500KB</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Operation 2 -->
                            <div class="bg-background rounded-lg p-4 border border-border">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-6 h-6 bg-accent text-white rounded-full flex items-center justify-center text-xs font-bold">2</div>
                                        <h3 class="font-medium">Format Conversion</h3>
                                    </div>
                                    <button class="text-text-secondary hover:text-error transition-colors duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Output Format</label>
                                        <select class="input-field w-full text-sm">
                                            <option>WebP (Recommended)</option>
                                            <option>JPEG</option>
                                            <option>PNG</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Add Operation Button -->
                            <button class="w-full border-2 border-dashed border-border hover:border-primary transition-colors duration-300 rounded-lg p-4 text-text-secondary hover:text-primary">
                                <div class="flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                    </svg>
                                    <span class="font-medium">Add Operation</span>
                                </div>
                            </button>

                            <!-- Output Settings -->
                            <div class="bg-background rounded-lg p-4 border border-border">
                                <h3 class="font-medium mb-3">Output Settings</h3>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Naming Convention</label>
                                        <input type="text" class="input-field w-full text-sm" placeholder="{filename}_processed_{date}" value="{filename}_optimized" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Folder Structure</label>
                                        <select class="input-field w-full text-sm">
                                            <option>Preserve Original</option>
                                            <option>Flatten All</option>
                                            <option>Group by Type</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Start Processing Button -->
                            <button class="btn-primary w-full py-3" id="start-processing-btn">
                                <div class="flex items-center justify-center space-x-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <span>Start Batch Processing</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Real-time Monitoring -->
                <div class="col-span-4 bg-surface rounded-xl border border-border overflow-hidden">
                    <div class="p-6 border-b border-border flex items-center justify-between">
                        <div>
                            <h2 class="text-lg font-semibold mb-2">Processing Monitor</h2>
                            <p class="text-text-secondary text-sm">Real-time status and progress</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="clear-queue-btn" class="btn-secondary text-xs py-2 px-3">
                                Clear Queue
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-6 overflow-y-auto max-h-full">
                        <!-- Current Job -->
                        <div class="mb-6">
                            <h3 class="font-medium mb-3">Current Job</h3>
                            <div class="bg-background rounded-lg p-4 border border-border">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Image Optimization Batch</span>
                                    <span class="text-xs text-accent">Processing</span>
                                </div>
                                <div class="mb-3">
                                    <div class="flex justify-between text-xs text-text-secondary mb-1">
                                        <span>Progress</span>
                                        <span>7/15 files</span>
                                    </div>
                                    <div class="w-full bg-background-light rounded-full h-2">
                                        <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 47%"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between text-xs text-text-secondary">
                                    <span>Est. completion: 2m 34s</span>
                                    <span>47% complete</span>
                                </div>
                            </div>
                        </div>

                        <!-- Queue Status (Dynamic) -->
                        <div class="mb-6">
                            <h3 class="font-medium mb-3">Processing Queue</h3>
                            <div class="space-y-3" id="processing-queue" aria-live="polite"></div>
                        </div>

                        <!-- Completed Jobs -->
                        <div class="mb-6">
                            <h3 class="font-medium mb-3">Recently Completed</h3>
                            <div class="space-y-2">
                                <!-- Completed Item 1 -->
                                <div class="flex items-center space-x-3 p-3 bg-background rounded-lg border border-border">
                                    <div class="w-2 h-2 bg-accent rounded-full"></div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium truncate">logo_variants_batch.zip</p>
                                        <p class="text-xs text-text-secondary">24 files • 2 minutes ago</p>
                                    </div>
                                    <button class="text-primary hover:text-primary-400 transition-colors duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                    </button>
                                </div>

                                <!-- Completed Item 2 -->
                                <div class="flex items-center space-x-3 p-3 bg-background rounded-lg border border-border">
                                    <div class="w-2 h-2 bg-accent rounded-full"></div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium truncate">presentation_images.zip</p>
                                        <p class="text-xs text-text-secondary">12 files • 8 minutes ago</p>
                                    </div>
                                    <button class="text-primary hover:text-primary-400 transition-colors duration-300">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- System Status -->
                        <div class="bg-background rounded-lg p-4 border border-border">
                            <h3 class="font-medium mb-3">System Status</h3>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">CPU Usage</span>
                                    <span class="text-warning">34%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Memory Usage</span>
                                    <span class="text-accent">67%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Active Workers</span>
                                    <span class="text-primary">4/8</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-text-secondary">Queue Size</span>
                                    <span class="text-text-primary">47 files</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile/Tablet Simplified Layout -->
            <div class="lg:hidden space-y-6">
                <!-- Mobile Upload Section -->
                <div class="card">
                    <h2 class="text-lg font-semibold mb-4">Upload Files</h2>
                    <div class="drop-zone mb-4" id="mobile-drop-zone">
                        <div class="flex flex-col items-center space-y-3">
                            <div class="w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                            </div>
                            <div class="text-center">
                                <h3 class="font-medium mb-1">Drop files here</h3>
                                <p class="text-text-secondary text-sm">Up to 100 files</p>
                            </div>
                            <button class="btn-primary text-sm py-2 px-4">
                                Browse Files
                            </button>
                        </div>
                        <input type="file" class="hidden" id="mobile-file-input" multiple accept="image/*,.pdf,.doc,.docx" />
                    </div>

                    <!-- Mobile File List -->
                    <div class="space-y-2 mb-4" id="mobile-file-list">
                        <div class="flex items-center space-x-3 p-3 bg-background rounded-lg border border-border">
                            <div class="w-8 h-8 bg-primary/20 rounded flex items-center justify-center flex-shrink-0">
                                <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-medium truncate">product_image_01.jpg</p>
                                <p class="text-xs text-text-secondary">2.4 MB</p>
                            </div>
                        </div>
                    </div>

                    <button class="btn-primary w-full" id="mobile-add-to-queue-btn">Add to Processing Queue</button>
                </div>

                <!-- Mobile Processing Options -->
                <div class="card">
                    <h2 class="text-lg font-semibold mb-4">Quick Processing Options</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <button class="p-4 bg-background rounded-lg border border-border hover:border-primary transition-colors duration-300 text-left">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="w-8 h-8 bg-primary/20 rounded flex items-center justify-center">
                                    <svg class="w-4 h-4 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <h3 class="font-medium">Compress Images</h3>
                            </div>
                            <p class="text-text-secondary text-sm">Reduce file sizes by up to 80%</p>
                        </button>

                        <button class="p-4 bg-background rounded-lg border border-border hover:border-primary transition-colors duration-300 text-left">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="w-8 h-8 bg-accent/20 rounded flex items-center justify-center">
                                    <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                                    </svg>
                                </div>
                                <h3 class="font-medium">Convert Formats</h3>
                            </div>
                            <p class="text-text-secondary text-sm">Change file formats in bulk</p>
                        </button>
                    </div>

                    <button class="btn-primary w-full mt-4">Start Batch Processing</button>
                </div>

                <!-- Mobile Progress Monitor -->
                <div class="card">
                    <h2 class="text-lg font-semibold mb-4">Processing Status</h2>
                    
                    <!-- Current Job Progress -->
                    <div class="bg-background rounded-lg p-4 border border-border mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium">Current Job</span>
                            <span class="text-xs text-accent">Processing</span>
                        </div>
                        <div class="mb-3">
                            <div class="flex justify-between text-xs text-text-secondary mb-1">
                                <span>Progress</span>
                                <span>7/15 files</span>
                            </div>
                            <div class="w-full bg-background-light rounded-full h-2">
                                <div class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 47%"></div>
                            </div>
                        </div>
                        <p class="text-xs text-text-secondary">Est. completion: 2m 34s</p>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-primary">47</div>
                            <div class="text-xs text-text-secondary">Files in Queue</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-accent">3</div>
                            <div class="text-xs text-text-secondary">Active Jobs</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Templates Section -->
    <section class="py-16 bg-background-light">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Processing Templates</h2>
                <p class="text-xl text-text-secondary max-w-2xl mx-auto">
                    Pre-configured workflows for common batch processing scenarios
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Template 1 -->
                <div class="card hover:shadow-lg hover:border-primary/50 transition-all duration-300 group cursor-pointer" data-template="web_optimization">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold">Web Optimization</h3>
                    </div>
                    <p class="text-text-secondary mb-4">Compress images to WebP format with 80% quality for web use. Perfect for websites and online galleries.</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-text-secondary">3 operations</span>
                        <button class="text-primary hover:text-primary-400 transition-colors duration-300" data-role="use-template">
                            <span class="text-sm font-medium">Use Template</span>
                        </button>
                    </div>
                </div>

                <!-- Template 2 -->
                <div class="card hover:shadow-lg hover:border-primary/50 transition-all duration-300 group cursor-pointer" data-template="document_archive">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-accent/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold">Document Archive</h3>
                    </div>
                    <p class="text-text-secondary mb-4">Merge multiple PDFs, compress for storage, and organize with consistent naming. Ideal for document management.</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-text-secondary">4 operations</span>
                        <button class="text-primary hover:text-primary-400 transition-colors duration-300" data-role="use-template">
                            <span class="text-sm font-medium">Use Template</span>
                        </button>
                    </div>
                </div>

                <!-- Template 3 -->
                <div class="card hover:shadow-lg hover:border-primary/50 transition-all duration-300 group cursor-pointer" data-template="social_media_pack">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-warning/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold">Social Media Pack</h3>
                    </div>
                    <p class="text-text-secondary mb-4">Resize images for different social platforms, generate QR codes for sharing, and optimize for mobile viewing.</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-text-secondary">5 operations</span>
                        <button class="text-primary hover:text-primary-400 transition-colors duration-300" data-role="use-template">
                            <span class="text-sm font-medium">Use Template</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Brand -->
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gradient">ImageToolkit Pro</h3>
                            <p class="text-sm text-text-secondary">Professional Processing</p>
                        </div>
                    </div>
                    <p class="text-text-secondary mb-4 max-w-md">
                        Professional image and PDF processing tools with zero complexity. Transform your workflow with our privacy-first approach.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="image_processing_hub.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Image Tools</a></li>
                        <li><a href="pdf_merge.html" class="text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a></li>
                        <li><a href="qr_code_studio.html" class="text-text-secondary hover:text-primary transition-colors duration-300">QR Studio</a></li>
                        <li><a href="batch_processing_center.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Batch Process</a></li>
                    </ul>
                </div>

                <!-- Resources -->
                <div>
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="privacy-policy.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Privacy Policy</a></li>
                        <li><a href="terms.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Terms & Conditions</a></li>
                        <li><a href="disclaimer.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Disclaimer</a></li>
                        <li><a href="cookies.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Cookie Policy</a></li>
                        <li><a href="about.html" class="text-text-secondary hover:text-primary transition-colors duration-300">About Us</a></li>
                        <li><a href="contact.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Contact Us</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-border mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-text-secondary text-sm">
                    © 2025 ImageToolkit Pro. All Rights Reserved.
                </p>
                <div class="flex items-center space-x-6 mt-4 md:mt-0">
                    <a href="https://github.com/techuhat" target="_blank" rel="noopener noreferrer" class="text-text-secondary hover:text-primary transition-colors duration-300" aria-label="GitHub">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/in/mohdkhanumar/" target="_blank" rel="noopener noreferrer" class="text-text-secondary hover:text-primary transition-colors duration-300" aria-label="LinkedIn">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="../js/nav.js"></script>
    <script>

        // Drag and drop functionality for desktop
        const dropZone = document.getElementById('batch-drop-zone');
        const fileInput = document.getElementById('batch-file-input');
        const fileList = document.getElementById('file-list');
        const clearAllBtn = document.getElementById('clear-all-btn');
        const addToQueueBtn = document.getElementById('add-to-queue-btn');

        // Mobile drag and drop
        const mobileDropZone = document.getElementById('mobile-drop-zone');
        const mobileFileInput = document.getElementById('mobile-file-input');
        const mobileFileList = document.getElementById('mobile-file-list');
        const mobileAddToQueueBtn = document.getElementById('mobile-add-to-queue-btn');

        // In-memory selection before queueing
        const selectedFiles = [];

        // Desktop drag and drop handlers
        if (dropZone && fileInput) {
            dropZone.addEventListener('click', () => {
                fileInput.click();
            });

            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });

            dropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                const files = e.dataTransfer.files;
                handleFiles(files, fileList);
            });

            fileInput.addEventListener('change', (e) => {
                const files = e.target.files;
                handleFiles(files, fileList);
            });
        }

        // Mobile drag and drop handlers
        if (mobileDropZone && mobileFileInput) {
            mobileDropZone.addEventListener('click', () => {
                mobileFileInput.click();
            });

            mobileDropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                mobileDropZone.classList.add('drag-over');
            });

            mobileDropZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                mobileDropZone.classList.remove('drag-over');
            });

            mobileDropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                mobileDropZone.classList.remove('drag-over');
                const files = e.dataTransfer.files;
                handleFiles(files, mobileFileList);
            });

            mobileFileInput.addEventListener('change', (e) => {
                const files = e.target.files;
                handleFiles(files, mobileFileList);
            });
        }

        // File handling function
    function handleFiles(files, targetList) {
            if (!targetList) return;

            Array.from(files).forEach(file => {
                const fileItem = createFileItem(file);
                targetList.appendChild(fileItem);
        selectedFiles.push(file);
            });
        }

        // Create file item element
        function createFileItem(file) {
            const fileItem = document.createElement('div');
            fileItem.className = 'flex items-center space-x-3 p-3 bg-background rounded-lg border border-border animate-fade-in';

            const fileType = file.type;
            let iconSvg = '';
            let iconColor = 'text-primary';

            if (fileType.startsWith('image/')) {
                iconSvg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>';
                iconColor = 'text-primary';
            } else if (fileType === 'application/pdf') {
                iconSvg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>';
                iconColor = 'text-accent';
            } else {
                iconSvg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>';
                iconColor = 'text-warning';
            }

            fileItem.innerHTML = `
                <div class="w-8 h-8 bg-${iconColor.split('-')[1]}/20 rounded flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 ${iconColor}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        ${iconSvg}
                    </svg>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium truncate">${file.name}</p>
                    <p class="text-xs text-text-secondary">${formatFileSize(file.size)} • Ready</p>
                </div>
                <button class="text-text-secondary hover:text-error transition-colors duration-300" onclick="this.parentElement.remove()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            `;

            return fileItem;
        }

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Start processing button handler
        const startProcessingBtn = document.getElementById('start-processing-btn');
        const clearQueueBtn = document.getElementById('clear-queue-btn');
        if (startProcessingBtn) {
            startProcessingBtn.addEventListener('click', async () => {
                if (!window.enhancedActivityTracker || (window.enhancedActivityTracker.processingQueue || []).length === 0) {
                    // Nothing queued
                    return;
                }
                // UI busy state
                const original = startProcessingBtn.innerHTML;
                startProcessingBtn.innerHTML = `
                    <div class="flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        <span>Processing...</span>
                    </div>`;
                startProcessingBtn.disabled = true;
                startProcessingBtn.classList.add('opacity-75', 'cursor-not-allowed');

                try {
                    const results = await window.enhancedActivityTracker.processQueue();
                    // Success UI
                    startProcessingBtn.innerHTML = `
                        <div class="flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            <span>Processing Complete</span>
                        </div>`;
                    startProcessingBtn.classList.add('success-bounce');

                    // Auto-download: if multiple, zip; else direct download
                    try {
                        const successful = (results || []).filter(r => r && r.status === 'completed' && r.result);
                        if (successful.length > 0) {
                            if (successful.length === 1) {
                                window.fileHandler.downloadFile(successful[0].result.blob, successful[0].result.filename);
                            } else {
                                const files = successful.map(s => ({ blob: s.result.blob, filename: s.result.filename }));
                                await window.fileHandler.downloadAsZip(files, 'processed_batch.zip');
                            }
                        }
                    } catch (zipErr) { console.warn('Auto-download failed:', zipErr); }
                } catch (e) {
                    console.error(e);
                } finally {
                    // Reset button after a moment
                    setTimeout(() => {
                        startProcessingBtn.innerHTML = original;
                        startProcessingBtn.disabled = false;
                        startProcessingBtn.classList.remove('opacity-75', 'cursor-not-allowed', 'success-bounce');
                    }, 1500);
                }
            });
        }

        if (clearQueueBtn) {
            clearQueueBtn.addEventListener('click', () => {
                if (window.enhancedActivityTracker) {
                    window.enhancedActivityTracker.clearQueue();
                    refreshCounters && refreshCounters();
                    try { window.showToast && window.showToast('Queue cleared', { type: 'info' }); } catch(_) {}
                }
            });
        }

        // Progress bar animation
        function animateProgressBar() {
            const progressBars = document.querySelectorAll('[style*="width:"]');
            progressBars.forEach(bar => {
                const currentWidth = parseInt(bar.style.width);
                if (currentWidth < 100) {
                    const newWidth = Math.min(currentWidth + Math.random() * 5, 100);
                    bar.style.width = newWidth + '%';
                }
            });
        }

    // Animate progress bars every 2 seconds (visual only)
    setInterval(animateProgressBar, 2000);

        // Template button handlers
        document.querySelectorAll('.card').forEach(card => {
            const useTemplateBtn = card.querySelector('button');
            if (useTemplateBtn && useTemplateBtn.textContent.includes('Use Template')) {
                useTemplateBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const templateName = card.querySelector('h3').textContent;
                    
                    // Show success message
                    const originalText = useTemplateBtn.innerHTML;
                    useTemplateBtn.innerHTML = '<span class="text-sm font-medium text-accent">Template Applied!</span>';
                    useTemplateBtn.classList.add('success-bounce');
                    
                    setTimeout(() => {
                        useTemplateBtn.innerHTML = originalText;
                        useTemplateBtn.classList.remove('success-bounce');
                    }, 2000);
                });
            }
        });

        // Real-time counter updates from actual queue/activity
        function refreshCounters() {
            const activeEl = document.getElementById('active-jobs-count');
            const queueEl = document.getElementById('files-in-queue-count');
            const completedEl = document.getElementById('completed-today-count');

            const tracker = window.enhancedActivityTracker;
            const queue = tracker ? (tracker.processingQueue || []) : [];

            const active = queue.filter(q => q.status === 'processing').length;
            const queued = queue.filter(q => q.status === 'queued').length;
            const completedToday = getCompletedTodayCount();

            if (activeEl) activeEl.textContent = String(active);
            if (queueEl) queueEl.textContent = String(queued);
            if (completedEl) completedEl.textContent = Number(completedToday || 0).toLocaleString();
        }

        function getCompletedTodayCount() {
            try {
                const activities = JSON.parse(localStorage.getItem('imageToolkitActivities') || '[]');
                const today = new Date();
                const y = today.getFullYear();
                const m = today.getMonth();
                const d = today.getDate();
                let total = 0;
                for (const a of activities) {
                    if (!a || !a.timestamp) continue;
                    const t = new Date(a.timestamp);
                    if (t.getFullYear() === y && t.getMonth() === m && t.getDate() === d) {
                        total += (a.details && a.details.filesProcessed) ? a.details.filesProcessed : 0;
                    }
                }
                return total;
            } catch (_) { return 0; }
        }

        setInterval(refreshCounters, 2000);

        // Queue wiring: clear and enqueue buttons
        function clearSelectedFiles() {
            selectedFiles.length = 0;
            if (fileList) fileList.innerHTML = '';
            if (mobileFileList) mobileFileList.innerHTML = '';
        }

        clearAllBtn && clearAllBtn.addEventListener('click', clearSelectedFiles);

        function addSelectionToQueue(toolType = 'compress') {
            if (!window.enhancedActivityTracker || selectedFiles.length === 0) return;
            window.enhancedActivityTracker.addToProcessingQueue([...selectedFiles], toolType, { quality: 0.8, format: 'webp' });
            clearSelectedFiles();
            refreshCounters();
        }
        addToQueueBtn && addToQueueBtn.addEventListener('click', () => addSelectionToQueue('compress'));
        mobileAddToQueueBtn && mobileAddToQueueBtn.addEventListener('click', () => addSelectionToQueue('compress'));
    </script>

    <!-- Core Processing Libraries -->
    <script src="../js/file-handler.js"></script>
    <script src="../js/image-processor.js"></script>
    <script src="../js/pdf-processor.js"></script>
    <script src="../js/qr-generator.js"></script>
    <script src="../js/toolkit-app.js"></script>
    <script src="../js/activity-tracker.js"></script>
    <script>
        // Initialize tracker and required singletons for processing
        (function initTracker(){
            try {
                if (!window.fileHandler && typeof FileHandler === 'function') {
                    window.fileHandler = new FileHandler();
                }
                if (!window.imageProcessor && typeof ImageProcessor === 'function') {
                    window.imageProcessor = new ImageProcessor();
                }
                if (!window.pdfProcessor && typeof PDFProcessor === 'function') {
                    window.pdfProcessor = new PDFProcessor();
                }
                if (!window.enhancedActivityTracker && typeof EnhancedActivityTracker === 'function') {
                    window.enhancedActivityTracker = new EnhancedActivityTracker();
                }
            } catch (e) { console.warn('Tracker init warning:', e); }
        })();
        // First paint counters
        refreshCounters && refreshCounters();
        if (window.enhancedActivityTracker && typeof window.enhancedActivityTracker.updateQueueUI === 'function') {
            window.enhancedActivityTracker.updateQueueUI();
        }
    </script>
    <script>
        // Helper: fetch files selected in the UI lists
        function getSelectedFilesFromUI() {
            // Files are tracked in selectedFiles array within this page's scope
            // Fallback: try fileHandler.files if available
            const fromLocal = (typeof selectedFiles !== 'undefined') ? [...selectedFiles] : [];
            const fh = (window.fileHandler && Array.isArray(window.fileHandler.files)) ? [...window.fileHandler.files] : [];
            // Prefer locally staged selection; else use fileHandler's current files
            return fromLocal.length ? fromLocal : fh;
        }

        function toast(msg) {
            try { window.showToast && window.showToast(msg, { type: 'success' }); } catch(_) {}
        }

        function showError(msg) {
            try { window.showToast && window.showToast(msg, { type: 'error' }); } catch(_) { console.error(msg); }
        }

        function applyTemplate(templateKey, useTemplateBtn) {
            const files = getSelectedFilesFromUI();
            if (!window.enhancedActivityTracker) {
                showError('Processing engine unavailable');
                return;
            }
            if (!files || files.length === 0) {
                showError('Pehle files select/add karein, phir template apply karein');
                return;
            }

            try {
                // Brief summary toast
                const summaries = {
                    web_optimization: 'Compress to WebP (80% quality) for web performance',
                    document_archive: 'Merge selected PDFs and compress the merged file',
                    social_media_pack: 'Resize for square, story, and landscape + compress'
                };
                try { window.showToast && window.showToast(summaries[templateKey] || 'Applying template...', { type: 'info' }); } catch(_) {}
                switch (templateKey) {
                    case 'web_optimization': {
                        // Only images; compress to webp 0.8
                        const imgs = files.filter(f => f.type.startsWith('image/'));
                        if (imgs.length === 0) {
                            showError('Is template ke liye image files chahiye');
                            return;
                        }
                        window.enhancedActivityTracker.addToProcessingQueue(imgs, 'compress', { quality: 0.8, format: 'webp' });
                        toast('Web Optimization queue me add ho gaya');
                        break;
                    }
                    case 'document_archive': {
                        // PDFs: merge all selected PDFs, then compress merged output
                        const pdfs = files.filter(f => f.type === 'application/pdf');
                        if (pdfs.length < 2) {
                            showError('Merge ke liye kam se kam 2 PDF select karein');
                            return;
                        }
                        // Add one queue item that holds all PDFs to merge
                        // We pass files via options; item.file will be first for preview
                        const first = pdfs[0];
                        window.enhancedActivityTracker.addToProcessingQueue([first], 'pdf_merge', {
                            files: pdfs,
                            outputName: 'document_archive',
                            compressAfterMerge: true,
                            compressOptions: { objectsPerTick: 80 }
                        });
                        toast('Document Archive workflow queue me add ho gaya');
                        break;
                    }
                    case 'social_media_pack': {
                        // Images: create multiple sizes then compress
                        const imgs = files.filter(f => f.type.startsWith('image/'));
                        if (imgs.length === 0) {
                            showError('Is template ke liye image files chahiye');
                            return;
                        }
                        // For each file, enqueue multiple tasks (resize square + story + landscape, then compress)
                        const sizes = [
                            { width: 1080, height: 1080 }, // square
                            { width: 1080, height: 1920 }, // story/portrait
                            { width: 1200, height: 630 }   // landscape
                        ];
                        sizes.forEach(sz => {
                            window.enhancedActivityTracker.addToProcessingQueue(imgs, 'resize', {
                                width: sz.width,
                                height: sz.height,
                                maintainAspectRatio: true,
                                highQuality: true
                            });
                        });
                        window.enhancedActivityTracker.addToProcessingQueue(imgs, 'compress', { quality: 0.82, format: 'webp' });
                        toast('Social Media Pack queue me add ho gaya');
                        break;
                    }
                }

                // Visual feedback on button
                if (useTemplateBtn) {
                    const originalText = useTemplateBtn.innerHTML;
                    useTemplateBtn.innerHTML = '<span class="text-sm font-medium text-accent">Template Applied!</span>';
                    useTemplateBtn.classList.add('success-bounce');
                    setTimeout(() => {
                        useTemplateBtn.innerHTML = originalText;
                        useTemplateBtn.classList.remove('success-bounce');
                    }, 2000);
                }
            } catch (e) {
                console.error(e);
                showError('Template apply karte waqt error aaya');
            }
        }

        // Bind template buttons
        document.querySelectorAll('.card[data-template] [data-role="use-template"]').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                const card = btn.closest('.card[data-template]');
                const key = card?.getAttribute('data-template');
                if (key) applyTemplate(key, btn);
            });
        });
    </script>

<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>



