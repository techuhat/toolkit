<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR Code Studio - ImageToolkit Pro</title>
    <meta name="description" content="Create custom QR codes locally — your content never leaves your device, no tracking." />
        <meta name="robots" content="index,follow" />
        <meta name="theme-color" content="#00a8ff" />
    <link rel="canonical" href="https://imagetoolkit.tech/pages/qr_code_studio.html" />
        <link rel="icon" type="image/svg+xml" href="../public/favicon.svg" />
        <link rel="icon" type="image/x-icon" href="../public/favicon.ico" />
    <link rel="apple-touch-icon" href="../public/apple-touch-icon-180.png" />
        <link rel="manifest" href="../public/manifest.json" />
        <meta property="og:title" content="QR Code Studio - ImageToolkit Pro" />
        <meta property="og:description" content="Create custom QR codes locally — your content never leaves your device, no tracking." />
        <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://imagetoolkit.tech/pages/qr_code_studio.html" />
    <meta property="og:image" content="https://imagetoolkit.tech/public/og/og-default.svg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://imagetoolkit.tech/public/og/og-default.svg" />
        <meta name="twitter:title" content="QR Code Studio - ImageToolkit Pro" />
        <meta name="twitter:description" content="Create custom QR codes locally — your content never leaves your device, no tracking." />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" defer src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fimagetoolk2871back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
                <script type="application/ld+json">{
            "@context":"https://schema.org",
            "@type":"WebPage",
            "name":"QR Code Studio",
            "description":"Advanced QR code generation workspace with customization, bulk creation, and export formats.",
            "url":"https://imagetoolkit.tech/pages/qr_code_studio.html",
            "inLanguage":"en",
            "publisher":{"@type":"Organization","name":"ImageToolkit Pro"}
        }</script>
                <script type="application/ld+json">{
                        "@context": "https://schema.org",
                        "@type": "BreadcrumbList",
                        "itemListElement": [
                            {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://imagetoolkit.tech/index.html"},
                            {"@type": "ListItem", "position": 2, "name": "QR Code Studio", "item": "https://imagetoolkit.tech/pages/qr_code_studio.html"}
                        ]
                }</script>
</head>
<body class="bg-background text-text-primary font-inter antialiased">
        <a class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:bg-surface-light focus:text-white focus:p-2 focus:rounded" href="#main">Skip to content</a>
    <!-- Navigation Header -->
    <header class="sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border">
    <nav aria-label="Main" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gradient">ImageToolkit Pro</h1>
                        <p class="text-xs text-text-secondary">Professional Processing</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="../index.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Home</a>
                    <a href="image_processing_hub.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Image Tools</a>
                    <a href="pdf_merge.html" class="text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a>
                    <a href="qr_code_studio.html" class="text-primary font-medium" aria-current="page">QR Studio</a>
                    <a href="batch_processing_center.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Batch Process</a>
                    <a href="privacy-policy.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Privacy</a>
                </div>

                <!-- Mobile Menu Button -->
                <button class="md:hidden p-2 rounded-lg hover:bg-surface transition-colors duration-300" id="mobile-menu-btn">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Navigation -->
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 bg-surface rounded-lg mt-2">
                    <a href="../index.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Home</a>
                    <a href="image_processing_hub.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Image Tools</a>
                    <a href="pdf_merge.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a>
                    <a href="qr_code_studio.html" class="block px-3 py-2 text-primary font-medium" aria-current="page">QR Studio</a>
                    <a href="batch_processing_center.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Batch Process</a>
                    <a href="privacy-policy.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Privacy</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="py-16 bg-background-light">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <div class="flex items-center justify-center space-x-3 mb-4">
                    <div class="w-12 h-12 bg-warning/20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/>
                        </svg>
                    </div>
                    <h1 class="text-3xl md:text-4xl font-bold">QR Code Studio</h1>
                </div>
                <p class="text-xl text-text-secondary max-w-3xl mx-auto">
                    Create professional QR codes with advanced customization, bulk generation, and multiple export formats
                </p>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="bg-surface/50 rounded-lg p-6 text-center border border-border">
                    <div class="text-2xl font-bold text-primary mb-2">4,000+</div>
                    <div class="text-text-secondary">Character Support</div>
                </div>
                <div class="bg-surface/50 rounded-lg p-6 text-center border border-border">
                    <div class="text-2xl font-bold text-accent mb-2">Multiple</div>
                    <div class="text-text-secondary">Export Formats</div>
                </div>
                <div class="bg-surface/50 rounded-lg p-6 text-center border border-border">
                    <div class="text-2xl font-bold text-warning mb-2">Bulk</div>
                    <div class="text-text-secondary">Generation Ready</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main QR Studio Interface -->
    <main id="main" class="py-12" role="main">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Input & Customization Panel -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- QR Type Selection -->
                    <div class="card">
                        <h3 class="text-lg font-semibold mb-4">QR Code Type</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <button class="qr-type-btn active flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-type="url">
                                <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
                                </svg>
                                <span>URL</span>
                            </button>
                            <button class="qr-type-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-type="text">
                                <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"/>
                                </svg>
                                <span>Text</span>
                            </button>
                            <button class="qr-type-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-type="contact">
                                <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                                <span>Contact</span>
                            </button>
                            <button class="qr-type-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-type="wifi">
                                <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/>
                                </svg>
                                <span>WiFi</span>
                            </button>
                            <button class="qr-type-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-type="sms">
                                <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                                </svg>
                                <span>SMS</span>
                            </button>
                            <button class="qr-type-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-type="email">
                                <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                <span>Email</span>
                            </button>
                        </div>
                    </div>

                    <!-- Content Input -->
                    <div class="card">
                        <h3 class="text-lg font-semibold mb-4">Content</h3>
                        
                        <!-- URL Input -->
                        <div id="url-input" class="input-section">
                            <label class="block text-sm font-medium mb-2">Website URL</label>
                            <input type="url" class="input-field w-full" placeholder="https://example.com" id="url-field" />
                        </div>

                        <!-- Text Input -->
                        <div id="text-input" class="input-section hidden">
                            <label class="block text-sm font-medium mb-2">Text Content</label>
                            <textarea class="input-field w-full h-32 resize-none" placeholder="Enter your text here..." id="text-field"></textarea>
                            <div class="text-sm text-text-secondary mt-2">
                                <span id="char-count">0</span> / 4000 characters
                            </div>
                        </div>

                        <!-- Contact Input -->
                        <div id="contact-input" class="input-section hidden space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">First Name</label>
                                    <input type="text" class="input-field w-full" placeholder="John" id="contact-firstname" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Last Name</label>
                                    <input type="text" class="input-field w-full" placeholder="Doe" id="contact-lastname" />
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Phone</label>
                                <input type="tel" class="input-field w-full" placeholder="+91 98765 43210" id="contact-phone" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Email</label>
                                <input type="email" class="input-field w-full" placeholder="john@example.com" id="contact-email" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Organization</label>
                                <input type="text" class="input-field w-full" placeholder="Company Name" id="contact-org" />
                            </div>
                        </div>

                        <!-- WiFi Input -->
                        <div id="wifi-input" class="input-section hidden space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Network Name (SSID)</label>
                                <input type="text" class="input-field w-full" placeholder="MyWiFiNetwork" id="wifi-ssid" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Password</label>
                                <input type="password" class="input-field w-full" placeholder="WiFi Password" id="wifi-password" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Security Type</label>
                                <select class="input-field w-full" id="wifi-security">
                                    <option value="WPA">WPA/WPA2</option>
                                    <option value="WEP">WEP</option>
                                    <option value="nopass">Open Network</option>
                                </select>
                            </div>
                        </div>

                        <!-- SMS Input -->
                        <div id="sms-input" class="input-section hidden space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Phone Number</label>
                                <input type="tel" class="input-field w-full" placeholder="+91 98765 43210" id="sms-phone" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Message</label>
                                <textarea class="input-field w-full h-24 resize-none" placeholder="Your message here..." id="sms-message"></textarea>
                            </div>
                        </div>

                        <!-- Email Input -->
                        <div id="email-input" class="input-section hidden space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Email Address</label>
                                <input type="email" class="input-field w-full" placeholder="recipient@example.com" id="email-address" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Subject</label>
                                <input type="text" class="input-field w-full" placeholder="Email Subject" id="email-subject" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Message</label>
                                <textarea class="input-field w-full h-24 resize-none" placeholder="Email message..." id="email-message"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Customization Options -->
                    <div class="card">
                        <h3 class="text-lg font-semibold mb-4">Customization</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Colors -->
                            <div>
                                <label class="block text-sm font-medium mb-3">Colors</label>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm w-20">Foreground:</span>
                                        <div class="flex space-x-2">
                                            <button class="color-preset active w-8 h-8 rounded border-2 border-primary transition-all duration-300" data-color="#000000" style="background-color: #000000;"></button>
                                            <button class="color-preset w-8 h-8 rounded border-2 border-transparent hover:border-primary transition-all duration-300" data-color="#00a8ff" style="background-color: #00a8ff;"></button>
                                            <button class="color-preset w-8 h-8 rounded border-2 border-transparent hover:border-primary transition-all duration-300" data-color="#2ed573" style="background-color: #2ed573;"></button>
                                            <button class="color-preset w-8 h-8 rounded border-2 border-transparent hover:border-primary transition-all duration-300" data-color="#ffa502" style="background-color: #ffa502;"></button>
                                            <input type="color" class="color-picker w-8 h-8 rounded border border-border cursor-pointer" value="#000000" id="fg-color" />
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm w-20">Background:</span>
                                        <div class="flex space-x-2">
                                            <button class="color-preset active w-8 h-8 rounded border-2 border-primary transition-all duration-300" data-color="#ffffff" style="background-color: #ffffff;"></button>
                                            <button class="color-preset w-8 h-8 rounded border-2 border-transparent hover:border-primary transition-all duration-300" data-color="#f0f0f0" style="background-color: #f0f0f0;"></button>
                                            <button class="color-preset w-8 h-8 rounded border-2 border-transparent hover:border-primary transition-all duration-300" data-color="#e6f7ff" style="background-color: #e6f7ff;"></button>
                                            <button class="color-preset w-8 h-8 rounded border-2 border-transparent hover:border-primary transition-all duration-300" data-color="#f0fdf4" style="background-color: #f0fdf4;"></button>
                                            <input type="color" class="color-picker w-8 h-8 rounded border border-border cursor-pointer" value="#ffffff" id="bg-color" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Error Correction -->
                            <div>
                                <label class="block text-sm font-medium mb-3">Error Correction</label>
                                <select class="input-field w-full" id="error-correction">
                                    <option value="L">Low (7%)</option>
                                    <option value="M" selected>Medium (15%)</option>
                                    <option value="Q">Quartile (25%)</option>
                                    <option value="H">High (30%)</option>
                                </select>
                                <p class="text-xs text-text-secondary mt-1">Higher levels provide better scanning reliability</p>
                            </div>
                        </div>

                        <!-- Size Options -->
                        <div class="mt-6">
                            <label class="block text-sm font-medium mb-3">Size</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <button class="size-preset active px-4 py-2 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-size="256">256px</button>
                                <button class="size-preset px-4 py-2 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-size="512">512px</button>
                                <button class="size-preset px-4 py-2 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-size="1024">1024px</button>
                                <button class="size-preset px-4 py-2 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-size="2048">2048px</button>
                            </div>
                        </div>
                    </div>

                    <!-- Bulk Generation -->
                    <div class="card">
                        <h3 class="text-lg font-semibold mb-4">Bulk Generation</h3>
                        <div class="space-y-4">
                            <div class="drop-zone" id="csv-drop-zone">
                                <div class="flex flex-col items-center space-y-3">
                                    <svg class="w-12 h-12 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    <div class="text-center">
                                        <p class="font-medium">Upload CSV file for bulk generation</p>
                                        <p class="text-sm text-text-secondary">Support for URLs, text, and contact data</p>
                                    </div>
                                    <button class="btn-secondary">Choose CSV File</button>
                                </div>
                                <input type="file" class="hidden" id="csv-input" accept=".csv" />
                            </div>
                            <div class="text-sm text-text-secondary">
                                <a href="javascript:void(0)" class="text-primary hover:underline">Download sample CSV template</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Preview & Export -->
                <div class="space-y-6">
                    <!-- Live Preview -->
                    <div class="card">
                        <h3 class="text-lg font-semibold mb-4">Live Preview</h3>
                        <div class="bg-white rounded-lg p-6 flex items-center justify-center min-h-64">
                            <div id="qr-preview" class="flex items-center justify-center">
                                <div class="text-center text-gray-500">
                                    <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"/>
                                    </svg>
                                    <p>Enter content to generate QR code</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Generate Button -->
                        <div class="mt-4">
                            <button class="btn-primary w-full shadow-lg hover:shadow-xl transition-shadow inline-flex items-center justify-center gap-2" id="generate-btn" aria-label="Generate QR code">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                </svg>
                                Generate QR Code
                            </button>
                        </div>
                    </div>

                    <!-- Export Options -->
                    <div class="card">
                        <h3 class="text-lg font-semibold mb-4">Export Options</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-3">
                                <button class="export-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-format="png">
                                    <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                    PNG
                                </button>
                                <button class="export-btn flex flex-col items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-format="svg">
                                    <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3H5a2 2 0 00-2 2v12a4 4 0 004 4h2a2 2 0 002-2V5a2 2 0 00-2-2z"/>
                                    </svg>
                                    SVG
                                </button>
                            </div>
                            <button class="export-btn w-full flex items-center justify-center p-4 rounded-lg border border-border bg-surface hover:bg-surface-light transition-all duration-300 text-sm font-medium" data-format="pdf">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                Export as PDF
                            </button>
                        </div>
                    </div>

                    <!-- Recent Codes -->
                                        <div class="card" aria-labelledby="recent-codes-heading">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 id="recent-codes-heading" class="text-lg font-semibold">Recent Codes</h3>
                                                    <button id="clear-recents-btn" class="text-text-secondary hover:text-error text-sm" aria-label="Clear recent codes">Clear</button>
                                                </div>
                        <div id="recent-codes-list" role="list" class="space-y-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Features Section -->
    <section class="py-24 bg-background-light">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Advanced QR Features</h2>
                <p class="text-xl text-text-secondary max-w-2xl mx-auto">
                    Professional tools for creating, customizing, and managing QR codes
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- High Resolution -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4">High Resolution Export</h3>
                    <p class="text-text-secondary">Generate QR codes up to 2048px for print-quality results and professional applications.</p>
                </div>

                <!-- Multiple Formats -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4">Multiple Export Formats</h3>
                    <p class="text-text-secondary">Export as PNG, SVG, or PDF with optimized settings for different use cases and platforms.</p>
                </div>

                <!-- Bulk Processing -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4">Bulk Generation</h3>
                    <p class="text-text-secondary">Create hundreds of QR codes from CSV data for events, inventory, or marketing campaigns.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Brand -->
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gradient">ImageToolkit Pro</h3>
                            <p class="text-sm text-text-secondary">Professional Processing</p>
                        </div>
                    </div>
                    <p class="text-text-secondary mb-4 max-w-md">
                        Professional image and PDF processing tools with zero complexity. Transform your workflow with our privacy-first approach.
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="image_processing_hub.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Image Tools</a></li>
                        <li><a href="pdf_merge.html" class="text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a></li>
                        <li><a href="qr_code_studio.html" class="text-text-secondary hover:text-primary transition-colors duration-300">QR Studio</a></li>
                        <li><a href="batch_processing_center.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Batch Process</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="privacy-policy.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Privacy Policy</a></li>
                        <li><a href="terms.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Terms & Conditions</a></li>
                        <li><a href="disclaimer.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Disclaimer</a></li>
                        <li><a href="cookies.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Cookie Policy</a></li>
                        <li><a href="about.html" class="text-text-secondary hover:text-primary transition-colors duration-300">About Us</a></li>
                        <li><a href="contact.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Contact Us</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-border mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-text-secondary text-sm">
                    © 2025 ImageToolkit Pro. All Rights Reserved.
                </p>
                <div class="flex items-center space-x-6 mt-4 md:mt-0">
                    <a href="#" class="text-text-secondary hover:text-primary transition-colors duration-300" aria-label="Twitter">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-text-secondary hover:text-primary transition-colors duration-300" aria-label="GitHub">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                        </svg>
                    </a>
                    <a href="#" class="text-text-secondary hover:text-primary transition-colors duration-300" aria-label="LinkedIn">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Removed inline @apply styles; classes added directly to elements above. -->

    <!-- JavaScript -->
    <script defer src="../js/nav.js"></script>
    <script defer src="../js/toast.js"></script>
    <script>

        // Helpers to toggle visual active state classes
        function setActiveStyles(list, activeEl, activeClasses) {
            list.forEach(el => el.classList.remove(...activeClasses));
            if (activeEl) activeEl.classList.add(...activeClasses);
        }

        // QR Type Selection
        const qrTypeButtons = document.querySelectorAll('.qr-type-btn');
        const inputSections = document.querySelectorAll('.input-section');

        qrTypeButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                qrTypeButtons.forEach(btn => btn.classList.remove('active'));
                // Add active class to clicked button
                button.classList.add('active');
                // Visual styles for active button
                setActiveStyles(qrTypeButtons, button, ['border-primary','bg-primary/10','text-primary']);
                
                // Hide all input sections
                inputSections.forEach(section => section.classList.add('hidden'));
                
                // Show corresponding input section
                const type = button.dataset.type;
                const targetSection = document.getElementById(`${type}-input`);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                }
            });
        });

        // Color Presets
        const colorPresets = document.querySelectorAll('.color-preset');
        colorPresets.forEach(preset => {
            preset.addEventListener('click', () => {
                const siblings = preset.parentElement.querySelectorAll('.color-preset');
                siblings.forEach(sibling => sibling.classList.remove('active','border-primary'));
                preset.classList.add('active','border-primary');
                // Sync the hidden input color if exists
                const picker = preset.parentElement.querySelector('input[type="color"]');
                if (picker) picker.value = preset.dataset.color;
            });
        });

        // Size Presets
        const sizePresets = document.querySelectorAll('.size-preset');
        sizePresets.forEach(preset => {
            preset.addEventListener('click', () => {
                sizePresets.forEach(p => p.classList.remove('active','border-primary','bg-primary/10','text-primary'));
                preset.classList.add('active','border-primary','bg-primary/10','text-primary');
            });
        });

        // Character Counter
        const textField = document.getElementById('text-field');
        const charCount = document.getElementById('char-count');

        if (textField && charCount) {
            textField.addEventListener('input', () => {
                const count = textField.value.length;
                charCount.textContent = count;
                
                if (count > 4000) {
                    charCount.classList.add('text-error');
                } else {
                    charCount.classList.remove('text-error');
                }
            });
        }

    // CSV Drop Zone
        const csvDropZone = document.getElementById('csv-drop-zone');
        const csvInput = document.getElementById('csv-input');
    const sampleCsvLink = document.querySelector('#csv-drop-zone + .text-sm a');

        csvDropZone.addEventListener('click', () => {
            csvInput.click();
        });

        csvDropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            csvDropZone.classList.add('drag-over');
        });

        csvDropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            csvDropZone.classList.remove('drag-over');
        });

        csvDropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            csvDropZone.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].name.endsWith('.csv')) {
                handleCSVFile(files[0]);
            }
        });

        csvInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleCSVFile(e.target.files[0]);
            }
        });

    async function handleCSVFile(file) {
            try {
                const text = await file.text();
                const lines = text.split(/\r?\n/).filter(l => l.trim().length > 0);
                if (lines.length === 0) return window.showToast('CSV is empty', 'warning');

                // Detect header
                let startIdx = 0;
                const header = lines[0].split(',').map(h => h.trim().toLowerCase());
                const hasHeader = header.some(h => ['data','text','url','phone','email','ssid'].includes(h));
                const rows = [];
                if (hasHeader) {
                    startIdx = 1;
                    for (let i = 1; i < lines.length; i++) {
                        const cols = lines[i].split(',');
                        const rowObj = {};
                        header.forEach((h, idx) => rowObj[h] = (cols[idx] || '').trim());
                        rows.push(rowObj);
                    }
                } else {
                    for (let i = 0; i < lines.length; i++) {
                        rows.push({ data: lines[i].trim() });
                    }
                }

                const activeType = document.querySelector('.qr-type-btn.active').dataset.type;
                const options = getQROptionsFromUI();
                const qrGen = new window.QRCodeGenerator();
                const fh = new window.FileHandler();
                const files = [];

                let idx = 0;
                for (const row of rows) {
                    idx++;
                    let blob;
                    try {
                        switch (activeType) {
                            case 'url': {
                                const url = row.url || row.data || row.text || '';
                                blob = await qrGen.generateQRBlob(url, options);
                                break;
                            }
                            case 'text': {
                                const txt = row.text || row.data || '';
                                blob = await qrGen.generateQRBlob(txt, options);
                                break;
                            }
                            case 'contact': {
                                const contact = {
                                    firstName: row.firstname || row.first || row.fname || '',
                                    lastName: row.lastname || row.last || row.lname || '',
                                    organization: row.org || row.organization || '' ,
                                    phone: row.phone || row.tel || '',
                                    email: row.email || ''
                                };
                                const dataUrl = await qrGen.generateContactQR(contact, options);
                                const resp = await fetch(dataUrl);
                                blob = await resp.blob();
                                break;
                            }
                            default: {
                                const data = row.data || row.text || row.url || '';
                                blob = await qrGen.generateQRBlob(data, options);
                            }
                        }
                        files.push({ blob, filename: `qr_${idx}.png` });
                    } catch (e) {
                        console.warn('CSV row failed', idx, e);
                    }
                }

                if (files.length) {
                    await fh.downloadAsZip(files, `qr_batch_${Date.now()}.zip`);
                    window.showToast(`Generated ${files.length} QR codes from CSV`, 'success');
                } else {
                    window.showToast('No valid rows found in CSV', 'warning');
                }
            } catch (err) {
                console.error(err);
                window.showToast('Failed to process CSV', 'error');
            }
        }

        // Download sample CSV template
        if (sampleCsvLink) {
            sampleCsvLink.id = 'sample-csv-link';
            sampleCsvLink.addEventListener('click', (e) => {
                e.preventDefault();
                const header = 'url,text,firstname,lastname,org,phone,email,ssid,password,security';
                const rows = [
                    'https://example.com,,, , , , , , ,',
                    ',Hello from ImageToolkit Pro,,,,,,,',
                    ',,,John,Doe,Acme Inc,+11234567890,john@example.com,,',
                    ',,,,,,MyWiFi,superSecret,WPA'
                ];
                const csv = [header, ...rows].join('\n');
                const blob = new Blob([csv], { type: 'text/csv' });
                const fh = new window.FileHandler();
                fh.downloadFile(blob, 'qr_sample_template.csv');
                window.showToast('Sample CSV downloaded', 'success');
            });
        }

        // Generate QR Code (real)
        const generateBtn = document.getElementById('generate-btn');
        const qrPreview = document.getElementById('qr-preview');
        let lastQRState = null; // { type, content, options }

        function getQROptionsFromUI() {
            const sizeEl = document.querySelector('.size-preset.active');
            const size = parseInt(sizeEl?.dataset.size || '256', 10);
            const fgColor = document.getElementById('fg-color').value || '#000000';
            const bgColor = document.getElementById('bg-color').value || '#FFFFFF';
            const ec = document.getElementById('error-correction').value || 'M';
            return {
                width: size,
                darkColor: fgColor,
                lightColor: bgColor,
                errorCorrectionLevel: ec,
                margin: 1,
                quality: 0.92
            };
        }

        function resolveContent() {
            const activeType = document.querySelector('.qr-type-btn.active').dataset.type;
            switch (activeType) {
                case 'url':
                    return { type: 'url', value: document.getElementById('url-field').value.trim() };
                case 'text':
                    return { type: 'text', value: document.getElementById('text-field').value };
                case 'contact':
                    return {
                        type: 'contact',
                        value: {
                            firstName: document.getElementById('contact-firstname').value,
                            lastName: document.getElementById('contact-lastname').value,
                            phone: document.getElementById('contact-phone').value,
                            email: document.getElementById('contact-email').value,
                            organization: document.getElementById('contact-org').value
                        }
                    };
                case 'wifi':
                    return {
                        type: 'wifi',
                        value: {
                            ssid: document.getElementById('wifi-ssid').value,
                            password: document.getElementById('wifi-password').value,
                            security: document.getElementById('wifi-security').value
                        }
                    };
                case 'sms':
                    return {
                        type: 'sms',
                        value: {
                            phone: document.getElementById('sms-phone').value,
                            message: document.getElementById('sms-message').value
                        }
                    };
                case 'email':
                    return {
                        type: 'email',
                        value: {
                            email: document.getElementById('email-address').value,
                            subject: document.getElementById('email-subject').value,
                            body: document.getElementById('email-message').value
                        }
                    };
            }
            return { type: 'text', value: '' };
        }

        generateBtn.addEventListener('click', async () => {
            const qrGen = new window.QRCodeGenerator();
            const { type, value } = resolveContent();
            const options = getQROptionsFromUI();

            try {
                let dataUrl = '';
                if ((typeof value === 'string' ? value : JSON.stringify(value)).trim().length === 0) {
                    return window.showToast('Please enter content to generate QR code', 'warning');
                }

                switch (type) {
                    case 'url':
                        dataUrl = await qrGen.generateURLQR(value, options);
                        break;
                    case 'text':
                        dataUrl = await qrGen.generateQRDataURL(value, options);
                        break;
                    case 'contact':
                        dataUrl = await qrGen.generateContactQR(value, options);
                        break;
                    case 'wifi': {
                        dataUrl = await qrGen.generateWiFiQR(value, options);
                        break;
                    }
                    case 'sms':
                        dataUrl = await qrGen.generateSMSQR(value.phone, value.message, options);
                        break;
                    case 'email':
                        dataUrl = await qrGen.generateEmailQR(value, options);
                        break;
                    default:
                        dataUrl = await qrGen.generateQRDataURL(String(value), options);
                }

                // Update preview
                qrPreview.innerHTML = '';
                const img = document.createElement('img');
                img.src = dataUrl;
                img.alt = 'Generated QR Code';
                img.loading = 'lazy';
                img.decoding = 'async';
                img.className = 'rounded-lg shadow-sm';
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                qrPreview.appendChild(img);

                lastQRState = { type, content: value, options };
                saveRecent(lastQRState, dataUrl);
                renderRecent();
                window.showToast('QR Code generated successfully!', 'success');
            } catch (e) {
                console.error(e);
                window.showToast('Failed to generate QR code', 'error');
            }
        });

        // Export Functions
        const exportButtons = document.querySelectorAll('.export-btn');
        exportButtons.forEach(button => {
            button.addEventListener('click', async () => {
                const format = button.dataset.format;
                await exportQRCode(format);
            });
        });

        async function exportQRCode(format) {
            if (!lastQRState) {
                return window.showToast('Please generate a QR code first', 'warning');
            }
            const qrGen = new window.QRCodeGenerator();
            const fh = new window.FileHandler();
            const fileBase = `qr_${lastQRState.type}_${Date.now()}`;
            try {
                switch (format) {
                    case 'png': {
                        const blob = await qrGen.generateQRBlob(resolveExportText(lastQRState), lastQRState.options);
                        fh.downloadFile(blob, `${fileBase}.png`);
                        break;
                    }
                    case 'svg': {
                        const svg = await qrGen.generateQRSVG(resolveExportText(lastQRState), lastQRState.options);
                        const blob = new Blob([svg], { type: 'image/svg+xml' });
                        fh.downloadFile(blob, `${fileBase}.svg`);
                        break;
                    }
                    case 'pdf': {
                        const blob = await qrGen.generateQRBlob(resolveExportText(lastQRState), lastQRState.options);
                        const file = new File([blob], 'qr.png', { type: 'image/png' });
                        const pdfp = new window.PDFProcessor();
                        const pdfBytes = await pdfp.imagesToPDF([file]);
                        const pdfBlob = new Blob([pdfBytes], { type: 'application/pdf' });
                        fh.downloadFile(pdfBlob, `${fileBase}.pdf`);
                        break;
                    }
                }
                window.showToast(`Exported ${format.toUpperCase()} successfully`, 'success');
            } catch (e) {
                console.error(e);
                window.showToast(`Failed to export ${format.toUpperCase()}`, 'error');
            }
        }

        function resolveExportText(state) {
            // Convert state back to a text payload when needed
            if (state.type === 'contact' || state.type === 'wifi' || state.type === 'email' || state.type === 'sms') {
                // Reuse the same logic as generation by using specialized methods in export
                // For blob/svg generation we call respective QRCodeGenerator helpers, but some need raw string:
                // We'll return a reasonable string if generic method is used.
                if (state.type === 'wifi') {
                    const { ssid, password, security = 'WPA' } = state.content;
                    return `WIFI:T:${security};S:${ssid};P:${password || ''};;`;
                }
                if (state.type === 'email') {
                    const { email, subject = '', body = '' } = state.content;
                    return `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                }
                if (state.type === 'sms') {
                    const { phone, message = '' } = state.content;
                    return `SMS:${phone}:${message}`;
                }
                if (state.type === 'contact') {
                    const { firstName = '', lastName = '', organization = '', phone = '', email = '' } = state.content;
                    return `BEGIN:VCARD\nVERSION:3.0\nFN:${firstName} ${lastName}\nN:${lastName};${firstName};;;\n${organization?`ORG:${organization}\n`:''}${phone?`TEL:${phone}\n`:''}${email?`EMAIL:${email}\n`:''}END:VCARD`;
                }
            }
            if (typeof state.content === 'string') return state.content;
            return JSON.stringify(state.content);
        }

        // Recent Codes logic
        const RECENTS_KEY = 'qr_recent_items_v1';
        function loadRecents() {
            try { return JSON.parse(localStorage.getItem(RECENTS_KEY) || '[]'); } catch { return []; }
        }
        function saveRecent(state, dataUrl) {
            const recents = loadRecents();
            const summary = typeof state.content === 'string' ? state.content : state.type;
            recents.unshift({
                type: state.type,
                summary: String(summary).slice(0, 60),
                dataUrl,
                options: state.options,
                timestamp: Date.now(),
                payload: state.content
            });
            localStorage.setItem(RECENTS_KEY, JSON.stringify(recents.slice(0, 8)));
        }
        function timeAgo(ts) {
            const s = Math.floor((Date.now() - ts) / 1000);
            if (s < 60) return `${s}s ago`;
            const m = Math.floor(s/60); if (m < 60) return `${m}m ago`;
            const h = Math.floor(m/60); if (h < 24) return `${h}h ago`;
            const d = Math.floor(h/24); return `${d}d ago`;
        }
        function renderRecent() {
            const list = document.getElementById('recent-codes-list');
            if (!list) return;
            const items = loadRecents();
            list.innerHTML = '';
            if (!items.length) {
                const empty = document.createElement('div');
                empty.className = 'text-text-secondary text-sm';
                empty.textContent = 'No recent codes yet.';
                list.appendChild(empty);
                return;
            }
            items.slice(0,6).forEach((it, idx) => {
                const row = document.createElement('div');
                row.className = 'flex items-center space-x-3 p-3 bg-surface/50 rounded-lg';
                row.setAttribute('role','listitem');
                row.innerHTML = `
                    <div class="w-12 h-12 bg-white rounded flex items-center justify-center overflow-hidden">
                        <img src="${it.dataUrl}" alt="QR thumbnail" class="w-full h-full object-cover" loading="lazy" decoding="async"/>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium truncate">${it.summary || it.type}</p>
                        <p class="text-xs text-text-secondary">${timeAgo(it.timestamp)}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                      <button class="text-primary hover:text-primary-400" aria-label="Use this QR" data-action="use" data-idx="${idx}">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4M16 17H4m0 0l4 4m-4-4l4-4"/></svg>
                      </button>
                      <a class="text-primary hover:text-primary-400" aria-label="Download PNG" href="${it.dataUrl}" download="recent_qr_${idx}.png">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14M12 12v7"/></svg>
                      </a>
                      <button class=\"text-primary hover:text-primary-400\" aria-label=\"Download SVG\" data-action=\"svg\" data-idx=\"${idx}\">
                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM7 3H5a2 2 0 00-2 2v12a4 4 0 004 4h2a2 2 0 002-2V5a2 2 0 00-2-2z\"/></svg>
                      </button>
                    </div>`;
                list.appendChild(row);
            });
            list.querySelectorAll('button[data-action="use"]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const items = loadRecents();
                    const item = items[parseInt(btn.getAttribute('data-idx'),10)];
                    if (!item) return;
                    // Restore preview and state
                    qrPreview.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = item.dataUrl; img.alt = 'Generated QR Code'; img.loading='lazy'; img.decoding='async'; img.className='rounded-lg shadow-sm';
                    img.style.maxWidth='100%'; img.style.height='auto';
                    qrPreview.appendChild(img);
                    lastQRState = { type: item.type, content: item.payload, options: item.options };
                    window.showToast('Loaded recent QR into preview', 'success');
                });
            });
            list.querySelectorAll('button[data-action=\"svg\"]').forEach(btn => {
                btn.addEventListener('click', async () => {
                    const items = loadRecents();
                    const idx = parseInt(btn.getAttribute('data-idx'),10);
                    const item = items[idx];
                    if (!item) return;
                    try {
                        const qrGen = new window.QRCodeGenerator();
                        const svg = await qrGen.generateQRSVG(resolveExportText({ type: item.type, content: item.payload }), item.options || {});
                        const blob = new Blob([svg], { type: 'image/svg+xml' });
                        const fh = new window.FileHandler();
                        fh.downloadFile(blob, `recent_qr_${idx}.svg`);
                        window.showToast('SVG downloaded', 'success');
                    } catch (e) {
                        console.error(e);
                        window.showToast('Failed to generate SVG', 'error');
                    }
                });
            });
        }


        // Initialize with URL input visible
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('url-input').classList.remove('hidden');
            // Initialize active visual styles
            const activeTypeBtn = document.querySelector('.qr-type-btn.active');
            if (activeTypeBtn) activeTypeBtn.classList.add('border-primary','bg-primary/10','text-primary');
            const activeSize = document.querySelector('.size-preset.active');
            if (activeSize) activeSize.classList.add('border-primary','bg-primary/10','text-primary');
            renderRecent();
        });

        // Clear recents
        const clearBtn = document.getElementById('clear-recents-btn');
        if (clearBtn) {
            clearBtn.addEventListener('click', () => {
                localStorage.removeItem(RECENTS_KEY);
                renderRecent();
                window.showToast('Cleared recent codes', 'success');
            });
        }
    </script>

    <!-- Core Processing Libraries -->
    <script defer src="../js/file-handler.js"></script>
    <script defer src="../js/image-processor.js"></script>
    <script defer src="../js/pdf-processor.js"></script>
    <script defer src="../js/qr-generator.js"></script>
    <script defer src="../js/toolkit-app.js"></script>

<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>



