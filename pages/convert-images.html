<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Convert Images Online (PNG ↔ JPG ↔ WebP ↔ AVIF) — ImageToolkit Pro</title>
  <meta name="description" content="Convert images between PNG, JPG, WebP, AVIF — locally in your browser with zero uploads and 0ms latency." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://imagetoolkit.tech/pages/convert-images.html" />
  <link rel="stylesheet" href="../css/main.css" />
  <link rel="icon" type="image/svg+xml" href="../public/favicon.svg" />
  <link rel="icon" type="image/x-icon" href="../public/favicon.ico" />
  <link rel="apple-touch-icon" href="../public/apple-touch-icon-180.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fimagetoolk2871back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
    <meta property="og:site_name" content="ImageToolkit Pro" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Convert Images Online (PNG ↔ JPG ↔ WebP ↔ AVIF) — ImageToolkit Pro" />
    <meta property="og:description" content="Convert images between PNG, JPG, WebP, AVIF — locally in your browser with zero uploads and 0ms latency." />
    <meta property="og:url" content="https://imagetoolkit.tech/pages/convert-images.html" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:image" content="https://imagetoolkit.tech/public/og/og-default.svg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Convert Images Online (PNG ↔ JPG ↔ WebP ↔ AVIF) — ImageToolkit Pro" />
    <meta name="twitter:description" content="Convert images between PNG, JPG, WebP, AVIF — locally in your browser with zero uploads and 0ms latency." />
  <meta name="twitter:image" content="https://imagetoolkit.tech/public/og/og-default.svg" />
    <meta name="theme-color" content="#0ea5e9" />
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Convert Images",
    "description": "Convert images between PNG, JPG, WebP, AVIF — locally in your browser with zero uploads and 0ms latency.",
    "url": "https://imagetoolkit.tech/pages/convert-images.html",
    "inLanguage": "en",
    "publisher": {"@type": "Organization", "name": "ImageToolkit Pro"}
  }</script>
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://imagetoolkit.tech/"},
      {"@type": "ListItem", "position": 2, "name": "Convert Images", "item": "https://imagetoolkit.tech/pages/convert-images.html"}
    ]
  }</script>
</head>
<body class="bg-background text-text-primary font-inter antialiased">
  <a class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:bg-surface-light focus:text-white focus:p-2 focus:rounded" href="#main">Skip to content</a>
  <header class="sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" aria-label="Main">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
          </div>
          <div>
            <h1 class="text-xl font-bold text-gradient">ImageToolkit Pro</h1>
            <p class="text-xs text-text-secondary">Professional Processing</p>
          </div>
        </div>
        <div class="hidden md:flex items-center space-x-8">
          <a href="../index.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Home</a>
          <a href="compress-images.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Compress</a>
          <a href="resize-images.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Resize</a>
          <a href="convert-images.html" class="text-primary font-medium" aria-current="page">Convert</a>
          <a href="pdf_merge.html" class="text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a>
          <a href="qr_code_studio.html" class="text-text-secondary hover:text-primary transition-colors duration-300">QR Studio</a>
        </div>
        <button class="md:hidden p-2 rounded-lg hover:bg-surface transition-colors duration-300" id="mobile-menu-btn">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
      <div class="md:hidden hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1 bg-surface rounded-lg mt-2">
          <a href="../index.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Home</a>
          <a href="compress-images.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Compress</a>
          <a href="resize-images.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">Resize</a>
          <a href="convert-images.html" class="block px-3 py-2 text-primary font-medium" aria-current="page">Convert</a>
          <a href="pdf_merge.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a>
          <a href="qr_code_studio.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors duration-300">QR Studio</a>
        </div>
      </div>
    </nav>
  </header>

  <div class="flex min-h-screen">
    <main id="main" class="flex-1 p-6">
      <div class="mb-8">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center space-x-3">
          <div class="w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
            </svg>
          </div>
          <div>
            <h1 class="text-3xl font-bold text-gradient">Convert Images</h1>
            <p class="text-text-secondary">Convert PNG, JPG, WebP, AVIF with quality control.</p>
          </div>
          </div>
          <div class="hidden lg:flex items-center space-x-6 bg-surface/50 rounded-xl px-6 py-3 border border-border">
            <div class="text-center">
              <div class="text-2xl font-bold text-primary" id="processed-count">0</div>
              <div class="text-xs text-text-secondary">Processed Today</div>
            </div>
            <div class="w-px h-10 bg-border"></div>
            <div class="text-center">
              <div class="text-2xl font-bold text-accent" id="saved-space">0MB</div>
              <div class="text-xs text-text-secondary">Space Saved</div>
            </div>
            <div class="w-px h-10 bg-border"></div>
            <div class="flex items-center space-x-2">
              <div class="w-2 h-2 bg-accent rounded-full animate-pulse"></div>
              <span class="text-sm text-text-secondary">Live</span>
            </div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
        <div class="xl:col-span-1 space-y-6">
          <div class="drop-zone group" id="convert-drop-zone">
            <div class="flex flex-col items-center space-y-4">
              <div class="w-16 h-16 bg-gradient-to-br from-primary/20 to-accent/20 rounded-full flex items-center justify-center">
                <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                </svg>
              </div>
              <div class="text-center">
                <h3 class="text-lg font-semibold mb-2">Format Conversion Engine</h3>
                <p class="text-text-secondary text-sm">Next-gen format support with optimization</p>
                <p class="text-text-secondary text-xs mt-1">Convert between all modern formats</p>
              </div>
              <button class="btn-primary">
                <svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                </svg>
                Select Images
              </button>
            </div>
            <input type="file" class="hidden" id="convert-file-input" multiple accept="image/*" />
          </div>

          <div class="card" id="convert-settings" style="display: none;">
            <h4 class="text-lg font-semibold mb-4 flex items-center">
              <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"/>
              </svg>
              Conversion Settings
            </h4>
            <div class="space-y-6">
              <div class="bg-surface-light rounded-lg p-4">
                <label class="block text-sm font-medium mb-3">Target Format</label>
                <div class="space-y-3">
                  <label class="format-btn flex items-center p-3 rounded-lg border border-border hover:border-primary hover:bg-primary/10 transition-all duration-300 cursor-pointer" data-format="webp">
                    <input type="radio" name="convert-format" value="webp" class="sr-only" />
                    <div class="w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center mr-3"><span class="text-xs font-bold text-primary">WebP</span></div>
                    <div class="flex-1"><div class="font-medium">WebP</div><div class="text-xs text-text-secondary">Smaller size, modern browsers</div></div>
                    <div class="px-2 py-1 bg-primary/20 text-primary text-xs rounded">Best</div>
                  </label>
                  <label class="format-btn flex items-center p-3 rounded-lg border border-border hover:border-primary hover:bg-primary/10 transition-all duration-300 cursor-pointer" data-format="avif">
                    <input type="radio" name="convert-format" value="avif" class="sr-only" />
                    <div class="w-8 h-8 bg-accent/20 rounded-lg flex items-center justify-center mr-3"><span class="text-xs font-bold text-accent">AVIF</span></div>
                    <div class="flex-1"><div class="font-medium">AVIF</div><div class="text-xs text-text-secondary">Highest compression</div></div>
                    <div class="px-2 py-1 bg-accent/20 text-accent text-xs rounded">Future</div>
                  </label>
                  <label class="format-btn flex items-center p-3 rounded-lg border border-border hover:border-primary hover:bg-primary/10 transition-all duration-300 cursor-pointer" data-format="jpeg">
                    <input type="radio" name="convert-format" value="jpeg" class="sr-only" />
                    <div class="w-8 h-8 bg-warning/20 rounded-lg flex items-center justify-center mr-3"><span class="text-xs font-bold text-warning">JPG</span></div>
                    <div class="flex-1"><div class="font-medium">JPEG</div><div class="text-xs text-text-secondary">Universal support</div></div>
                    <div class="px-2 py-1 bg-warning/20 text-warning text-xs rounded">Universal</div>
                  </label>
                  <label class="format-btn flex items-center p-3 rounded-lg border border-border hover:border-primary hover:bg-primary/10 transition-all duration-300 cursor-pointer" data-format="png">
                    <input type="radio" name="convert-format" value="png" class="sr-only" />
                    <div class="w-8 h-8 bg-error/20 rounded-lg flex items-center justify-center mr-3"><span class="text-xs font-bold text-error">PNG</span></div>
                    <div class="flex-1"><div class="font-medium">PNG</div><div class="text-xs text-text-secondary">Lossless, transparency</div></div>
                    <div class="px-2 py-1 bg-error/20 text-error text-xs rounded">Lossless</div>
                  </label>
                </div>
              </div>

              <div class="bg-surface-light rounded-lg p-4" id="quality-settings" style="display: none;">
                <label class="block text-sm font-medium mb-3 flex items-center justify-between">
                  <span>Quality Level</span>
                  <span class="text-primary font-bold" id="convert-quality-value">90%</span>
                </label>
                <div class="relative">
                  <input type="range" id="convert-quality-slider" min="10" max="100" value="90" class="w-full itp-slider" />
                  <div class="flex justify-between text-xs text-text-secondary mt-2">
                    <span>Smaller size</span>
                    <span>Maximum quality</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="xl:col-span-2 space-y-6">
          <div class="card" id="convert-preview" style="display: none;">
            <h4 class="text-lg font-semibold mb-4 flex items-center">
              <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
              </svg>
              Live Preview
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-3">
                <div class="flex items-center justify-between">
                  <h5 class="font-medium text-text-secondary">Original</h5>
                  <div class="text-xs text-text-secondary" id="convert-original-size">-</div>
                </div>
                <div class="relative aspect-video bg-surface-light rounded-lg overflow-hidden group">
                  <img id="convert-original-preview" class="w-full h-full object-cover" alt="Original" loading="lazy" decoding="async" />
                  <div class="absolute top-2 left-2 bg-surface/90 rounded px-2 py-1 text-xs">Original</div>
                </div>
                <div class="text-xs text-text-secondary" id="convert-original-dimensions">-</div>
              </div>
              <div class="space-y-3">
                <div class="flex items-center justify-between">
                  <h5 class="font-medium text-text-secondary">Converted</h5>
                  <div class="text-xs text-text-secondary" id="convert-converted-size">-</div>
                </div>
                <div class="relative aspect-video bg-surface-light rounded-lg overflow-hidden group">
                  <img id="convert-converted-preview" class="w-full h-full object-cover" alt="Converted" loading="lazy" decoding="async" />
                  <div class="absolute top-2 left-2 bg-primary/90 rounded px-2 py-1 text-xs text-white">Converted</div>
                </div>
                <div class="text-xs text-text-secondary" id="convert-converted-dimensions">-</div>
              </div>
            </div>
            <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="bg-gradient-to-r from-accent/20 to-accent/30 rounded-lg p-4 text-center">
                <div class="text-2xl font-bold text-accent" id="convert-size-diff">0%</div>
                <div class="text-xs text-text-secondary">Size Change</div>
              </div>
              <div class="bg-gradient-to-r from-primary/20 to-primary/30 rounded-lg p-4 text-center">
                <div class="text-2xl font-bold text-primary" id="convert-quality">-</div>
                <div class="text-xs text-text-secondary">Quality</div>
              </div>
              <div class="bg-gradient-to-r from-warning/20 to-warning/30 rounded-lg p-4 text-center">
                <div class="text-2xl font-bold text-warning" id="convert-output-format">-</div>
                <div class="text-xs text-text-secondary">Output Format</div>
              </div>
            </div>
          </div>

          <div class="card" id="convert-info">
            <h4 class="text-lg font-semibold mb-4 flex items-center">
              <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Format Comparison & Benefits
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-gradient-to-br from-primary/20 to-primary/30 rounded-lg p-4"><h5 class="font-semibold text-primary mb-2">WebP</h5><ul class="text-sm text-text-secondary space-y-1"><li>• 25–35% smaller than JPEG</li><li>• Supports transparency</li><li>• Excellent quality</li></ul></div>
              <div class="bg-gradient-to-br from-accent/20 to-accent/30 rounded-lg p-4"><h5 class="font-semibold text-accent mb-2">AVIF</h5><ul class="text-sm text-text-secondary space-y-1"><li>• 50% smaller than JPEG</li><li>• Superior compression</li><li>• HDR support</li></ul></div>
              <div class="bg-gradient-to-br from-warning/20 to-warning/30 rounded-lg p-4"><h5 class="font-semibold text-warning mb-2">JPEG</h5><ul class="text-sm text-text-secondary space-y-1"><li>• Universal compatibility</li><li>• Optimized for photos</li></ul></div>
              <div class="bg-gradient-to-br from-error/20 to-error/30 rounded-lg p-4"><h5 class="font-semibold text-error mb-2">PNG</h5><ul class="text-sm text-text-secondary space-y-1"><li>• Lossless compression</li><li>• Transparency support</li></ul></div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-8 flex justify-center">
        <button class="btn-primary px-12 py-4 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300" id="process-btn" style="display: none;">
          <svg class="w-6 h-6 inline-block mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
          Start Processing
        </button>
      </div>
    </main>

    <aside class="w-96 bg-surface/50 border-l border-border p-6 hidden xl:block">
      <div class="sticky top-24 space-y-8">
        <div>
          <h3 class="text-lg font-semibold mb-4 flex items-center">
            <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
            Processing Queue
          </h3>
          <div class="space-y-3" id="processing-queue">
            <div class="text-center py-12">
              <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-primary/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                </svg>
              </div>
              <p class="text-text-secondary font-medium">Ready to Process</p>
              <p class="text-text-secondary text-sm mt-1">Upload images to begin</p>
            </div>
          </div>
        </div>

        <div class="bg-primary/10 rounded-xl p-4 border border-primary/20">
          <div class="flex items-start space-x-3">
            <svg class="w-5 h-5 text-primary flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
            <div>
              <h5 class="text-sm font-semibold text-primary mb-1">100% Privacy Protected</h5>
              <p class="text-xs text-text-secondary leading-relaxed">All processing happens locally in your browser. Your images never leave your device.</p>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <footer class="bg-surface/50 border-t border-border py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div class="col-span-1 md:col-span-2">
          <div class="flex items-center space-x-3 mb-4">
            <div class="w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gradient">ImageToolkit Pro</h3>
              <p class="text-sm text-text-secondary">Advanced Image Processing</p>
            </div>
          </div>
          <p class="text-text-secondary mb-4 max-w-md leading-relaxed">
            Professional-grade image processing with AI-powered enhancements. Transform your workflow with our privacy-first, browser-based tools.
          </p>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Quick Access</h4>
          <ul class="space-y-2">
            <li><a href="compress-images.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Compress Images</a></li>
            <li><a href="resize-images.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Resize Images</a></li>
            <li><a href="convert-images.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Convert Images</a></li>
            <li><a href="pdf_merge.html" class="text-text-secondary hover:text-primary transition-colors duration-300">PDF Tools</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4">Resources</h4>
          <ul class="space-y-2">
            <li><a href="privacy-policy.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Privacy Policy</a></li>
            <li><a href="terms.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Terms & Conditions</a></li>
            <li><a href="disclaimer.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Disclaimer</a></li>
            <li><a href="cookies.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Cookie Policy</a></li>
            <li><a href="about.html" class="text-text-secondary hover:text-primary transition-colors duration-300">About Us</a></li>
            <li><a href="contact.html" class="text-text-secondary hover:text-primary transition-colors duration-300">Contact Us</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-border mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-text-secondary text-sm">© 2025 ImageToolkit Pro. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <script src="../js/nav.js"></script>
  <script src="../js/toast.js"></script>
  <script>
    let currentTool = 'convert';
    const selectedFilesByTool = { compress: [], resize: [], convert: [] };

    function setSliderFill(slider) {
      if (!slider) return;
      const min = parseFloat(slider.min || '0');
      const max = parseFloat(slider.max || '100');
      const val = parseFloat(slider.value || String(min));
      const ratio = (val - min) / Math.max(1, (max - min));
      const w = slider.clientWidth || slider.offsetWidth || 0;
      const styles = getComputedStyle(slider);
      const thumbSizeRaw = styles.getPropertyValue('--thumb-size').trim();
      const thumbSize = thumbSizeRaw.endsWith('px') ? parseFloat(thumbSizeRaw) : 18;
      let percent = ratio * 100;
      if (w > 0) {
        const px = (ratio * (w - thumbSize)) + thumbSize / 2;
        percent = (px / w) * 100;
      }
      slider.style.setProperty('--valp', percent + '%');
    }

    function setupFileUpload(toolName) {
      const dropZone = document.getElementById(`${toolName}-drop-zone`);
      const fileInput = document.getElementById(`${toolName}-file-input`);
      const settings = document.getElementById(`${toolName}-settings`);
      const processBtn = document.getElementById('process-btn');
      if (!dropZone || !fileInput) return;
      const selectButton = dropZone.querySelector('button');
      if (selectButton) {
        selectButton.addEventListener('click', (e) => { e.stopPropagation(); fileInput.click(); });
      }
      fileInput.addEventListener('change', (e) => {
        const files = Array.from(e.target.files);
        if (files.length > 0) {
          handleFiles(files, toolName);
          try { window.enhancedActivityTracker?.addToProcessingQueue(files, toolName, getProcessingOptions()); } catch {}
          window.showToast(`${files.length} file(s) selected successfully`, 'success');
        }
        e.target.value = '';
      });
      window.fileHandler.setupDragAndDrop(dropZone, {
        acceptedTypes: window.fileHandler.acceptedImageTypes,
        multiple: true,
        maxFiles: 50,
        clickToBrowse: false,
        onFilesAdded: (data) => {
          if (data.errors.length > 0) data.errors.forEach(error => window.showToast(error, 'error'));
          if (data.validFiles.length > 0) {
            handleFiles(data.validFiles, toolName);
            try { window.enhancedActivityTracker?.addToProcessingQueue(data.validFiles, toolName, getProcessingOptions()); } catch {}
            window.showToast(`${data.validFiles.length} file(s) added successfully`, 'success');
          }
        },
        onDragEnter: () => dropZone.classList.add('drag-over'),
        onDragLeave: () => dropZone.classList.remove('drag-over')
      });
    }

    async function handleFiles(files, toolName) {
      if (files.length === 0) return;
      const settings = document.getElementById(`${toolName}-settings`);
      const processBtn = document.getElementById('process-btn');
      if (settings) { settings.style.display = 'block'; settings.classList.add('animate-fade-in'); }
      if (processBtn) { processBtn.style.display = 'inline-flex'; processBtn.classList.add('animate-fade-in'); }
      selectedFilesByTool[toolName] = Array.from(files);
      const file = files[0];
      // ensure format default
      const defaultBtn = document.querySelector('.format-btn[data-format="webp"]'); defaultBtn?.click();
      // Show preview
      try {
        await showConvertPreview(file);
      } catch {}
    }

    function addToQueueDisplay(files) { /* handled by tracker */ }

    function setupFormatSelection() {
      const formatBtns = document.querySelectorAll('.format-btn');
      const qualitySettings = document.getElementById('quality-settings');
      const convertQualitySlider = document.getElementById('convert-quality-slider');
      const convertQualityValue = document.getElementById('convert-quality-value');
      const isLossy = (fmt) => fmt === 'jpeg' || fmt === 'webp' || fmt === 'avif';
      const setQualityDefaultsFor = (fmt) => {
        if (!convertQualitySlider || !convertQualityValue) return;
        let v = convertQualitySlider.value ? parseInt(convertQualitySlider.value) : 90;
        if (fmt === 'webp') v = 85;
        if (fmt === 'avif') v = 75;
        if (fmt === 'jpeg') v = 90;
        convertQualitySlider.value = String(v);
        convertQualityValue.textContent = v + '%';
        setSliderFill(convertQualitySlider);
      };
      formatBtns.forEach(btn => {
        btn.addEventListener('click', async () => {
          const format = btn.dataset.format;
          formatBtns.forEach(b => { b.classList.remove('border-primary', 'bg-primary/10'); const radio = b.querySelector('input[type="radio"]'); if (radio) radio.checked = false; });
          btn.classList.add('border-primary', 'bg-primary/10');
          const radio = btn.querySelector('input[type="radio"]'); if (radio) radio.checked = true;
          if (qualitySettings) { if (isLossy(format)) { qualitySettings.style.display = 'block'; setQualityDefaultsFor(format); } else { qualitySettings.style.display = 'none'; } }
          const files = selectedFilesByTool.convert || [];
          if (files.length > 0) { try { await showConvertPreview(files[0]); } catch {} }
        });
      });
      const defaultBtn = document.querySelector('.format-btn[data-format="webp"]'); defaultBtn?.click();
    }

    function setupSliders() {
      const convertQualitySlider = document.getElementById('convert-quality-slider');
      const convertQualityValue = document.getElementById('convert-quality-value');
      if (convertQualitySlider && convertQualityValue) {
        convertQualitySlider.addEventListener('input', async (e) => {
          const value = e.target.value; convertQualityValue.textContent = value + '%'; setSliderFill(convertQualitySlider);
          const files = selectedFilesByTool.convert || [];
          if (files.length > 0) { try { await showConvertPreview(files[0]); } catch {} }
        });
        setSliderFill(convertQualitySlider);
        convertQualitySlider.dispatchEvent(new Event('input'));
      }
      window.addEventListener('resize', () => setSliderFill(convertQualitySlider));
    }

  async function processFiles(files, options) { /* processing via EnhancedActivityTracker */ return []; }

  function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  async function showConvertPreview(file) {
    const preview = document.getElementById('convert-preview');
    const originalPreview = document.getElementById('convert-original-preview');
    const convertedPreview = document.getElementById('convert-converted-preview');
    const originalSize = document.getElementById('convert-original-size');
    const convertedSize = document.getElementById('convert-converted-size');
    const originalDimensions = document.getElementById('convert-original-dimensions');
    const convertedDimensions = document.getElementById('convert-converted-dimensions');
    const sizeDiff = document.getElementById('convert-size-diff');
    const qualityLabel = document.getElementById('convert-quality');
    const outFmtLabel = document.getElementById('convert-output-format');

    if (!file || !file.type?.startsWith('image/')) return;
    if (preview) { preview.style.display = 'block'; preview.classList.add('animate-fade-in'); }

    try {
      const info = await window.imageProcessor.getImageInfo(file);
      const reader = new FileReader();
      reader.onload = () => { if (originalPreview) originalPreview.src = reader.result; };
      reader.readAsDataURL(file);
      if (originalSize) originalSize.textContent = formatFileSize(file.size);
      if (originalDimensions) originalDimensions.textContent = `${info.width} × ${info.height}`;

      const opts = getProcessingOptions();
      let tf = (opts.targetFormat || 'webp').toLowerCase();
      if (tf === 'jpg') tf = 'jpeg';
      const blob = await window.imageProcessor.convertFormat(file, tf, opts.quality || 0.9);
      const url = URL.createObjectURL(blob);
      if (convertedPreview) convertedPreview.src = url;
      if (convertedSize) convertedSize.textContent = formatFileSize(blob.size);
      if (convertedDimensions) convertedDimensions.textContent = `${info.width} × ${info.height}`;
      if (sizeDiff) sizeDiff.textContent = `${(((blob.size - file.size) / file.size) * 100).toFixed(0)}%`;
      if (qualityLabel) qualityLabel.textContent = `${Math.round((opts.quality || 0.9) * 100)}%`;
      if (outFmtLabel) outFmtLabel.textContent = (tf || '').toUpperCase();
      setTimeout(() => URL.revokeObjectURL(url), 30000);
    } catch (err) {
      console.error('Preview failed', err);
      window.showToast('Error generating convert preview', 'error');
    }
  }

    function generateProcessedFilename(originalFile, options) {
      const name = originalFile.name.split('.')[0];
      const timestamp = Date.now();
      const extension = options.targetFormat;
      return `${name}_convert_${timestamp}.${extension}`;
    }

    function getProcessingOptions() {
      return {
        targetFormat: document.querySelector('[name="convert-format"]:checked')?.value || 'webp',
        quality: (parseInt(document.getElementById('convert-quality-slider')?.value || 90)) / 100
      };
    }

  function addDownloadButtons(processedFiles) { /* handled by tracker */ }

    async function downloadAsZip(files, zipName) {
  if (!window.JSZip) { window.showToast('ZIP library not loaded', 'error'); return; }
      const zip = new JSZip(); files.forEach(({ blob, filename }) => zip.file(filename || 'file', blob));
      const zipBlob = await zip.generateAsync({ type: 'blob' });
      const link = document.createElement('a'); link.href = URL.createObjectURL(zipBlob); link.download = zipName; link.style.display = 'none'; document.body.appendChild(link); link.click(); document.body.removeChild(link); setTimeout(() => URL.revokeObjectURL(link.href), 100);
    }

  // Using global window.showToast from ../js/toast.js

    function setupProcessButton() {
      const processBtn = document.getElementById('process-btn');
      processBtn?.addEventListener('click', async () => {
        const files = selectedFilesByTool.convert || [];
        const tracker = window.enhancedActivityTracker;
        if ((!tracker || tracker.processingQueue.length === 0) && files.length === 0) {
          window.showToast('No files to process', 'warning'); return;
        }
        if (tracker) {
          const hasQueued = tracker.processingQueue.some(it => it.status === 'queued');
          if (tracker.processingQueue.length === 0 && files.length > 0) {
            try { tracker.addToProcessingQueue(files, 'convert', getProcessingOptions()); } catch {}
          } else if (!hasQueued) {
            const sourceFiles = files.length > 0 ? files : tracker.processingQueue.map(it => it.file);
            if (sourceFiles.length > 0) {
              try { tracker.addToProcessingQueue(sourceFiles, 'convert', getProcessingOptions()); } catch {}
            }
          }
        }

        processBtn.disabled = true; processBtn.innerHTML = `Processing...`;
        try {
          if (tracker) {
            const currentOpts = getProcessingOptions();
            tracker.processingQueue.forEach(it => {
              if (it.status === 'queued' && it.toolType === 'convert') {
                it.options = currentOpts;
              }
            });
          }

          const results = await tracker?.processQueue();
          const successful = (results || []).filter(r => r.status === 'completed' && r.result && r.result.blob);
          const successCount = successful.length;
          if (successCount > 0) {
            window.showToast(`${successCount} file(s) processed successfully!`, 'success');
            if (successCount === 1) {
              window.fileHandler.downloadFile(successful[0].result.blob, successful[0].result.filename);
            } else {
              const files = successful.map(r => ({ blob: r.result.blob, filename: r.result.filename }));
              try { await downloadAsZip(files, `converted_images_${Date.now()}.zip`); } catch {}
            }
          }
          tracker?.updateUI();
        } catch (error) { console.error('Processing error:', error); window.showToast(`Processing failed: ${error.message}`, 'error'); }
        finally { processBtn.disabled = false; processBtn.innerHTML = `Start Processing`; }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      window.imageProcessor = new ImageProcessor();
      window.fileHandler = new FileHandler();
      try { window.enhancedActivityTracker = new EnhancedActivityTracker(); window.enhancedActivityTracker.updateUI(); } catch {}
      setupFileUpload('convert');
      setupFormatSelection();
      setupSliders();
      setupProcessButton();
    });

    const style = document.createElement('style');
    style.textContent = `.animate-fade-in{animation:fadeIn 0.3s ease-out forwards}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}`;
    document.head.appendChild(style);
  </script>

  <script src="https://unpkg.com/jszip@3.10.1/dist/jszip.min.js" defer></script>
  <script src="../js/activity-tracker.js" defer></script>
  <script src="../js/file-handler.js" defer></script>
  <script src="../js/image-processor.js" defer></script>
  <script src="../js/pdf-processor.js" defer></script>
  <script src="../js/qr-generator.js" defer></script>
  <script src="../js/toolkit-app.js" defer></script>
  <script id="dhws-dataInjector" src="../public/dhws-data-injector.js" defer></script>
</body>
</html>




